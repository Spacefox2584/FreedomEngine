<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>FreedomEngine</title>
    <link rel="stylesheet" href="./style.css" />
    <!-- R4: layout modes (separate file, minimal risk) -->
    <link rel="stylesheet" href="./layout.css" />
  </head>

  <!-- ✅ Light theme is default -->
  <body data-theme="light" data-layout="compact">
    <div id="fe-app" class="app">
      <header class="topbar">
        <div class="brand">
          <div class="mark">FE</div>
          <div class="brand-text">
            <div class="brand-name">FreedomEngine</div>
            <div class="brand-sub">Shell v0.1</div>
          </div>
        </div>

        <div class="spaces" id="fe-spaces" aria-label="Spaces"></div>

        <div class="topbar-right">
          <!-- ✅ R4: Layout toggle -->
          <button class="btn ghost" id="fe-btn-layout" title="Toggle layout mode">
            Layout
          </button>

          <!-- ✅ R3.2: Changelog + Feedback -->
          <button class="btn ghost" id="fe-btn-changelog" title="View changelog">
            Changelog
          </button>
          <button class="btn ghost" id="fe-btn-feedback" title="Send feedback">
            Feedback
          </button>

          <button class="btn ghost" id="fe-toggle-theme" title="Toggle theme">
            Theme
          </button>

          <div class="status" id="fe-status" title="Status">
            <span class="dot" aria-hidden="true"></span>
            <span class="status-text">Local</span>
          </div>
        </div>
      </header>

      <main class="main">
        <section class="workspace" aria-label="Workspace">
          <div id="fe-mount" class="mount"></div>
        </section>

        <aside class="pane" id="fe-pane" aria-label="Detail pane" data-open="0">
          <div class="pane-header">
            <div class="pane-title" id="fe-pane-title">Details</div>
            <button class="btn ghost small" id="fe-pane-close" title="Close pane">
              Close
            </button>
          </div>
          <div class="pane-body" id="fe-pane-body"></div>
        </aside>
      </main>

      <footer class="bottombar">
        <div class="footer-left">
          <div class="hint">
            <span class="kbd">Ctrl</span> + <span class="kbd">K</span> reserved
            (later). URL state is live now.
          </div>
          <div class="footer-actions">
            <button class="btn ghost small" id="fe-inspect-toggle">Inspect</button>
            <button
              class="btn ghost small"
              id="fe-snapshot-now"
              title="Force a snapshot now (dev)"
            >
              Snapshot
            </button>
          </div>
        </div>

        <div class="hint" id="fe-route-hint"></div>
      </footer>

      <div class="inspector" id="fe-inspector" data-open="0" aria-label="State inspector">
        <div class="inspector-head">
          <div class="inspector-title">State Inspector</div>
          <button class="btn ghost small" id="fe-inspect-close">Close</button>
        </div>
        <pre class="inspector-body" id="fe-inspect-body"></pre>
      </div>
    </div>

    <!--
      R5: Runtime env injection (generated at build/deploy time).
      This keeps Supabase URLs/keys out of the repo and lets Vercel env vars drive stage/prod.
    -->
    <script src="./runtime-env.js"></script>

    <script type="module" src="./app.js"></script>
  </body>
</html>
